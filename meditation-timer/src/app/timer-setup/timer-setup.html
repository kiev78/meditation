<mat-expansion-panel [expanded]="isExpanded" (expandedChange)="togglePanel($event)" class="setup-container">
  <mat-expansion-panel-header>
    <mat-panel-title>
      Meditation Options
    </mat-panel-title>
  </mat-expansion-panel-header>

  <div class="controls-wrapper">
    <!-- Duration Slider -->
    <div class="control-row">
      <mat-label>Duration (min)</mat-label>
      <div class="slider-input-group">
        <mat-slider min="1" max="90" step="1" [disabled]="timerService.stateSubjectValue.isRunning" class="expanded-slider">
          <input matSliderThumb [(ngModel)]="durationMinutes">
        </mat-slider>
        <mat-form-field appearance="outline" class="value-input">
          <input matInput type="number" #durationInput [(ngModel)]="durationMinutes" [disabled]="timerService.stateSubjectValue.isRunning">
        </mat-form-field>
        <span class="value-text">{{durationMinutes}}</span>
      </div>
    </div>

    <!-- Delay Slider -->
    <div class="control-row">
      <mat-label>Delay (sec)</mat-label>
      <div class="slider-input-group">
        <mat-slider min="0" max="20" step="1" [disabled]="timerService.stateSubjectValue.isRunning" class="expanded-slider">
          <input matSliderThumb [(ngModel)]="delaySeconds">
        </mat-slider>
        <mat-form-field appearance="outline" class="value-input">
          <input matInput type="number" [(ngModel)]="delaySeconds" [disabled]="timerService.stateSubjectValue.isRunning">
        </mat-form-field>
        <span class="value-text">{{delaySeconds}}</span>
      </div>
    </div>

    <!-- Guided Meditation Toggle -->
    <div class="control-row guided-row">
      <mat-slide-toggle
        [checked]="timerService.stateSubjectValue.isGuided"
        (change)="toggleGuided($event.checked)"
        color="primary">
        Guided Meditation
      </mat-slide-toggle>

      <button mat-icon-button routerLink="/settings" matTooltip="Settings (s)">
        <mat-icon>settings</mat-icon>
      </button>
    </div>

  </div>
</mat-expansion-panel>
